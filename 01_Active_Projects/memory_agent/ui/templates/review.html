{% extends "base.html" %}

{% block title %}å¤ä¹  - ğŸ§  å­¦ä¹ è®°å¿†åŠ©æ‰‹{% endblock %}

{% block content %}
<style>
.review-container {
    max-width: 900px;
    margin: 0 auto;
}

.stats-card {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    padding: 25px;
    border-radius: 12px;
    color: white;
    margin-bottom: 30px;
}

.review-list {
    margin-top: 30px;
}

.review-item {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 20px;
    border-left: 4px solid #f5576c;
}

.review-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.review-title {
    font-size: 18px;
    font-weight: 600;
    color: #333;
}

.review-due {
    background: #f5576c;
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 12px;
}

.review-content {
    color: #666;
    line-height: 1.6;
    margin-bottom: 15px;
}

.rating-form {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
}

.rating-label {
    font-weight: 600;
    color: #333;
}

.rating-buttons {
    display: flex;
    gap: 5px;
}

.rating-btn {
    width: 40px;
    height: 40px;
    border: 2px solid #e0e0e0;
    background: white;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
}

.rating-btn:hover {
    border-color: #f5576c;
    background: #fff5f6;
}

.rating-btn.selected {
    background: #f5576c;
    color: white;
    border-color: #f5576c;
}

.submit-btn {
    padding: 10px 20px;
    background: #f5576c;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
}

.no-reviews {
    text-align: center;
    padding: 60px 20px;
}

.no-reviews-icon {
    font-size: 64px;
    margin-bottom: 20px;
}

.rating-guide {
    background: #fff;
    padding: 15px;
    border-radius: 8px;
    margin-top: 10px;
    font-size: 12px;
    color: #666;
}

.rating-guide-item {
    display: flex;
    justify-content: space-between;
    padding: 3px 0;
}
</style>

<div class="review-container">
    <h1 style="margin-bottom: 20px; color: #333;">ğŸ“– æ™ºèƒ½å¤ä¹ </h1>

    <div class="stats-card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <div style="font-size: 32px; font-weight: bold;">{{ due_reviews|length }}</div>
                <div style="opacity: 0.9;">å¾…å¤ä¹ å†…å®¹</div>
            </div>
            <div style="text-align: right; font-size: 14px; opacity: 0.9;">
                {{ stats|safe }}
            </div>
        </div>
    </div>

    {% if due_reviews %}
        <div class="review-list">
            {% for review in due_reviews %}
            <div class="review-item" id="review-{{ review.id }}">
                <div class="review-header">
                    <div class="review-title">{{ review.title }}</div>
                    <div class="review-due">å¾…å¤ä¹ </div>
                </div>
                <div class="review-content">{{ review.content|truncate(400) }}</div>
                <div class="review-meta" style="font-size: 12px; color: #999; margin-bottom: 15px;">
                    ğŸ“ {{ review.path }} | ğŸ“… ä¸Šæ¬¡å¤ä¹ : {{ review.last_review }}
                </div>

                <form action="{{ url_for('rate_review', review_id=review.id) }}" method="post" class="rating-form">
                    <span class="rating-label">è¯„åˆ†:</span>
                    <div class="rating-buttons">
                        <button type="submit" name="rating" value="0" class="rating-btn" title="å®Œå…¨å¿˜è®°">0</button>
                        <button type="submit" name="rating" value="1" class="rating-btn" title="é”™è¯¯ä¸”æ— å°è±¡">1</button>
                        <button type="submit" name="rating" value="2" class="rating-btn" title="é”™è¯¯ä½†æœ‰å°è±¡">2</button>
                        <button type="submit" name="rating" value="3" class="rating-btn" title="å›å¿†èµ·ä½†å›°éš¾">3</button>
                        <button type="submit" name="rating" value="4" class="rating-btn" title="æ­£ç¡®ä½†çŠ¹è±«">4</button>
                        <button type="submit" name="rating" value="5" class="rating-btn" title="å®Œç¾è®°å¿†">5</button>
                    </div>
                    <button type="submit" class="submit-btn">æäº¤è¯„åˆ†</button>
                </form>

                <div class="rating-guide">
                    <div class="rating-guide-item"><span>5 - å®Œç¾è®°å¿†</span><span>1å¤©åå¤ä¹ </span></div>
                    <div class="rating-guide-item"><span>4 - æ­£ç¡®ä½†çŠ¹è±«</span><span>3å¤©åå¤ä¹ </span></div>
                    <div class="rating-guide-item"><span>3 - å›å¿†èµ·ä½†å›°éš¾</span><span>7å¤©åå¤ä¹ </span></div>
                    <div class="rating-guide-item"><span>2 - é”™è¯¯ä½†æœ‰å°è±¡</span><span>14å¤©åå¤ä¹ </span></div>
                    <div class="rating-guide-item"><span>1 - é”™è¯¯ä¸”æ— å°è±¡</span><span>30å¤©åå¤ä¹ </span></div>
                    <div class="rating-guide-item"><span>0 - å®Œå…¨å¿˜è®°</span><span>90å¤©åå¤ä¹ </span></div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="no-reviews">
            <div class="no-reviews-icon">âœ…</div>
            <h2>å¤ªæ£’äº†ï¼</h2>
            <p>ä»Šå¤©æ²¡æœ‰éœ€è¦å¤ä¹ çš„å†…å®¹</p>
            <p style="color: #666; margin-top: 10px;">ç»§ç»­ä¿æŒï¼Œæ˜å¤©å†æ¥æŸ¥çœ‹</p>
        </div>
    {% endif %}
</div>
{% endblock %}
