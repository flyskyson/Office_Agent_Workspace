# ğŸ‰ å¸‚åœºç›‘ç®¡æ™ºèƒ½ä½“ - v3.0 é‡å¤§æ›´æ–°

> **åŸºäº Jinja2 æ¨¡æ¿çš„å…¨æ–°ç‰ˆæœ¬**
>
> ä½¿ç”¨ä¸šç•Œæ ‡å‡†çš„æ¨¡æ¿è¯­æ³•ï¼Œå®ç°æ›´å¼ºå¤§ã€æ›´çµæ´»çš„æ–‡æ¡£ç”ŸæˆåŠŸèƒ½

---

## âœ¨ v3.0 æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ç®€å•ç›´è§‚
```bash
# åœ¨ Word ä¸­ç›´æ¥è¾“å…¥å˜é‡
ä¸ªä½“å·¥å•†æˆ·åç§°ï¼š{{business_name}}
ç»è¥è€…å§“åï¼š{{operator_name}}
```

### ğŸ”¥ å¼ºå¤§åŠŸèƒ½
- âœ… **æ¡ä»¶åˆ¤æ–­**ï¼š`{% if %}...{% endif %}`
- âœ… **åˆ—è¡¨å¾ªç¯**ï¼š`{% for %}...{% endfor %}`
- âœ… **è¡¨æ ¼åˆå¹¶**ï¼š`{% vm %}`, `{% hm %}`
- âœ… **50+ è¿‡æ»¤å™¨**ï¼š`{{var|upper}}`, `{{var|default('å€¼')}}`

### ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…ä¾èµ–
pip install docxtpl

# 2. æµ‹è¯•è¿è¡Œ
python jinja2_filler.py --test

# 3. éªŒè¯æ¨¡æ¿
python jinja2_filler.py --validate my_template.docx

# 4. ç”Ÿæˆæ–‡æ¡£
python jinja2_filler.py --data my_data.json
```

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| **[å®Œæ•´ä½¿ç”¨æŒ‡å—](JINJA2_VERSION_GUIDE.md)** | è¯¦ç»†çš„æ•™ç¨‹å’Œå‚è€ƒ |
| **[ç‰ˆæœ¬å¯¹æ¯”](VERSION_COMPARISON.md)** | v2.0 vs v3.0 å¯¹æ¯”åˆ†æ |
| **[æ›´æ–°æ—¥å¿—](CHANGELOG.md)** | æ‰€æœ‰ç‰ˆæœ¬çš„å˜æ›´è®°å½• |

---

## ğŸ†š ç‰ˆæœ¬å¯¹æ¯”

### v2.0ï¼ˆé¢œè‰²æ ‡è®°ç‰ˆï¼‰
- âŒ éœ€è¦æ‰‹åŠ¨è®¾ç½®å­—ä½“é¢œè‰²
- âŒ ä¸æ”¯æŒæ¡ä»¶é€»è¾‘
- âŒ ä¸æ”¯æŒåˆ—è¡¨å¾ªç¯
- âœ… ç›´è§‚çš„é¢œè‰²å¯è§†åŒ–

### v3.0ï¼ˆJinja2æ¨¡æ¿ç‰ˆï¼‰â­ æ¨è
- âœ… ç›´æ¥è¾“å…¥å˜é‡å
- âœ… å®Œæ•´çš„æ¡ä»¶åˆ¤æ–­æ”¯æŒ
- âœ… å¼ºå¤§çš„å¾ªç¯åŠŸèƒ½
- âœ… ä¸šç•Œæ ‡å‡†æ¨¡æ¿è¯­æ³•
- âœ… å‡ ä¹æ— é™çš„å¯èƒ½æ€§

---

## ğŸ’¡ æ¨¡æ¿ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•
```
ä¸ªä½“å·¥å•†æˆ·åç§°ï¼š{{business_name}}
ç»è¥è€…å§“åï¼š{{operator_name}}
è”ç³»ç”µè¯ï¼š{{phone}}
```

### æ¡ä»¶åˆ¤æ–­
```
{% if operation_period == 'é•¿æœŸ' %}
ç»è¥æœŸé™ï¼šé•¿æœŸ
{% else %}
ç»è¥æœŸé™ï¼š{{operation_period}}
{% endif %}
```

### åˆ—è¡¨å¾ªç¯
```
ç»è¥èŒƒå›´ï¼š
{% for item in business_scope_list %}
- {{item}}
{% endfor %}
```

### å¤æ‚ç¤ºä¾‹
```
{% if business_scope_list %}
  ç»è¥èŒƒå›´ï¼š
  {% for item in business_scope_list %}
  {{loop.index}}. {{item}}
  {% endfor %}
{% else %}
  ç»è¥èŒƒå›´ï¼šæœªå¡«å†™
{% endif %}

{% if has_license %}
  è®¸å¯è¯ç¼–å·ï¼š{{license_number}}
{% endif %}
```

---

## ğŸ“– å¿«é€Ÿæ•™ç¨‹

### æ­¥éª¤1ï¼šåˆ›å»ºæ¨¡æ¿

åœ¨ Word æ–‡æ¡£ä¸­è¾“å…¥ï¼š
```
ä¸ªä½“å·¥å•†æˆ·å¼€ä¸šç™»è®°ç”³è¯·ä¹¦

ä¸ªä½“å·¥å•†æˆ·åç§°ï¼š{{business_name}}
ç»è¥è€…å§“åï¼š{{operator_name}}
æ€§åˆ«ï¼š{{gender}}
è”ç³»ç”µè¯ï¼š{{phone}}
ç»è¥åœºæ‰€ï¼š{{business_address}}
```

ä¿å­˜ä¸º `template.docx`

### æ­¥éª¤2ï¼šå‡†å¤‡æ•°æ®

åˆ›å»º `data.json`ï¼š
```json
{
  "business_name": "å¼ ä¸‰ä¾¿åˆ©åº—",
  "operator_name": "å¼ ä¸‰",
  "gender": "ç”·",
  "phone": "13800138000",
  "business_address": "å¹¿è¥¿ç‰æ—å¸‚å…´ä¸šå¿è’²å¡˜é•‡å•†ä¸šè¡—88å·"
}
```

### æ­¥éª¤3ï¼šç”Ÿæˆæ–‡æ¡£

```bash
python jinja2_filler.py --template template.docx --data data.json
```

å®Œæˆï¼âœ…

---

## ğŸ“ è¿›é˜¶æŠ€å·§

### 1. æ™ºèƒ½é»˜è®¤å€¼
```
é‚®æ”¿ç¼–ç ï¼š{{postal_code|default('537820')}}
```

### 2. æ—¥æœŸæ ¼å¼åŒ–
```
ç”³è¯·æ—¥æœŸï¼š{{today_year}}å¹´{{today_month}}æœˆ{{today_day}}æ—¥
```

### 3. æ€§åˆ«ç§°è°“
```
å°Šæ•¬çš„{{operator_name}}{{gender_title}}ï¼š
```
ï¼ˆä¼šè‡ªåŠ¨ç”Ÿæˆ"å…ˆç”Ÿ"æˆ–"å¥³å£«"ï¼‰

### 4. è¡¨æ ¼å¾ªç¯
åœ¨ Word è¡¨æ ¼ä¸­ï¼š
```
{% for item in business_scope_list %}
{{item}}
{% endfor %}
```

---

## ğŸ› ï¸ å‘½ä»¤è¡Œå®Œæ•´é€‰é¡¹

```bash
# æŸ¥çœ‹å¸®åŠ©
python jinja2_filler.py --help

# æµ‹è¯•æ¨¡å¼
python jinja2_filler.py --test

# éªŒè¯æ¨¡æ¿
python jinja2_filler.py --validate template.docx

# å•ä¸ªæ–‡ä»¶
python jinja2_filler.py --data data.json

# æ‰¹é‡å¤„ç†
python jinja2_filler.py --batch batch_data.json

# æŒ‡å®šæ¨¡æ¿å’Œè¾“å‡º
python jinja2_filler.py \
  --template my_template.docx \
  --data my_data.json \
  --output my_output

# ä¸è‡ªåŠ¨æ‰“å¼€
python jinja2_filler.py --data data.json --no-open

# é™é»˜æ¨¡å¼
python jinja2_filler.py --data data.json --quiet
```

---

## ğŸ“Š æ•°æ®æ ¼å¼

### å®Œæ•´æ•°æ®ç¤ºä¾‹
```json
{
  "business_name": "å¼ ä¸‰ä¾¿åˆ©åº—",
  "operator_name": "å¼ ä¸‰",
  "phone": "13800138000",
  "email": "zhangsan@example.com",
  "business_address": "å¹¿è¥¿ç‰æ—å¸‚å…´ä¸šå¿è’²å¡˜é•‡å•†ä¸šè¡—88å·",
  "postal_code": "537820",
  "employee_count": "3",
  "registered_capital": "50000",
  "id_card": "450101199001011234",
  "gender": "ç”·",
  "nation": "æ±‰æ—",
  "political_status": "ç¾¤ä¼—",
  "education": "é«˜ä¸­",
  "business_scope": "é£Ÿå“é”€å”®ï¼›æ—¥ç”¨ç™¾è´§",
  "operation_period": "é•¿æœŸ"
}
```

### è‡ªåŠ¨å¤„ç†å­—æ®µ
å·¥å…·ä¼šè‡ªåŠ¨æ·»åŠ ï¼š
- `today`: å½“å‰æ—¥æœŸ
- `today_year`, `today_month`, `today_day`
- `gender_title`: å…ˆç”Ÿ/å¥³å£«
- `business_scope_list`: ç»è¥èŒƒå›´åˆ—è¡¨

---

## ğŸ”„ ä» v2.0 è¿ç§»

### ç®€å•ä¸‰æ­¥

1. **è½¬æ¢æ¨¡æ¿**
   - çº¢è‰²å­—ä½“ â†’ `{{å˜é‡å}}`
   - åˆ é™¤é¢œè‰²æ ‡è®°

2. **éªŒè¯æ¨¡æ¿**
   ```bash
   python jinja2_filler.py --validate new_template.docx
   ```

3. **æµ‹è¯•è¿è¡Œ**
   ```bash
   python jinja2_filler.py --test
   ```

### è¯¦ç»†çš„è¿ç§»æŒ‡å—
è¯·å‚é˜… [ç‰ˆæœ¬å¯¹æ¯”æ–‡æ¡£](VERSION_COMPARISON.md)

---

## â“ å¸¸è§é—®é¢˜

### Q: æ¨¡æ¿å˜é‡æ²¡æœ‰è¢«æ›¿æ¢ï¼Ÿ
**A**: ä½¿ç”¨ `--validate` æ£€æŸ¥å˜é‡åï¼š
```bash
python jinja2_filler.py --validate template.docx
```

### Q: å¦‚ä½•å¤„ç†å¯é€‰å­—æ®µï¼Ÿ
**A**: ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ï¼š
```
{% if email %}
ç”µå­é‚®ç®±ï¼š{{email}}
{% endif %}
```

### Q: ç»è¥èŒƒå›´å¦‚ä½•åˆ†æ¡æ˜¾ç¤ºï¼Ÿ
**A**: ä½¿ç”¨å¾ªç¯ï¼š
```
{% for item in business_scope_list %}
- {{item}}
{% endfor %}
```

æ›´å¤šé—®é¢˜è¯·æŸ¥çœ‹ [å®Œæ•´ä½¿ç”¨æŒ‡å—](JINJA2_VERSION_GUIDE.md)

---

## ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹© v3.0ï¼Ÿ

### å¯¹ä¸ªäººç”¨æˆ·
- âœ… æ›´ç®€å•ï¼šæ— éœ€è®¾ç½®é¢œè‰²
- âœ… æ›´å¼ºå¤§ï¼šæ”¯æŒé€»è¾‘å’Œå¾ªç¯
- âœ… æ›´çµæ´»ï¼šå‡ ä¹æ— é™å¯èƒ½

### å¯¹ä¼ä¸šç”¨æˆ·
- âœ… ä¸šç•Œæ ‡å‡†ï¼šJinja2 å¹¿æ³›ä½¿ç”¨
- âœ… æ˜“ç»´æŠ¤ï¼šæ¨¡æ¿æ¸…æ™°æ˜äº†
- âœ… å¯æ‰©å±•ï¼šæ”¯æŒè‡ªå®šä¹‰åŠŸèƒ½
- âœ… æ˜“é›†æˆï¼šæ ‡å‡†çš„ Python æŠ€æœ¯

### å¯¹å¼€å‘è€…
- âœ… æ ‡å‡†è¯­æ³•ï¼šå­¦ä¹ æˆæœ¬ä½
- âœ… å¼ºå¤§åŠŸèƒ½ï¼šå®Œæ•´ç¼–ç¨‹èƒ½åŠ›
- âœ… ä¸°å¯Œèµ„æºï¼šå¤§é‡ç¤ºä¾‹å’Œæ–‡æ¡£

---

## ğŸŒŸ æŠ€æœ¯äº®ç‚¹

### åŸºäºæˆç†ŸæŠ€æœ¯
- [python-docx-template](https://github.com/elapouya/python-docx-template)ï¼šæˆç†Ÿçš„æ–‡æ¡£æ¨¡æ¿åº“
- [Jinja2](https://jinja.palletsprojects.com/)ï¼šä¸šç•Œæ ‡å‡†æ¨¡æ¿å¼•æ“
- [python-docx](https://github.com/python-openxml/python-docx)ï¼šç¨³å®šçš„ Word å¤„ç†åº“

### å€ŸåŠ© zread ç ”å‘
- ğŸ“š å®æ—¶è®¿é—® GitHub æµ·é‡ä»£ç 
- ğŸ” å­¦ä¹ ä¸šç•Œæœ€ä½³å®è·µ
- ğŸ¯ é¿å…å·²çŸ¥æŠ€æœ¯é™·é˜±
- ğŸš€ å¿«é€ŸéªŒè¯æŠ€æœ¯æ–¹æ¡ˆ

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶

```
market_supervision_agent/
â”œâ”€â”€ jinja2_filler.py              # â­ æ–°ç‰ˆä¸»ç¨‹åº
â”œâ”€â”€ test_data_jinja2.json         # æµ‹è¯•æ•°æ®
â”œâ”€â”€ JINJA2_VERSION_GUIDE.md       # å®Œæ•´ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ VERSION_COMPARISON.md         # ç‰ˆæœ¬å¯¹æ¯”
â”œâ”€â”€ CHANGELOG.md                  # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ README_v3.md                  # æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ æå¥•å‡¤ç‰ˆç”³è¯·ä¹¦å¡«å……å·¥å…·_v2.py  # æ—§ç‰ˆï¼ˆé¢œè‰²æ ‡è®°ï¼‰
â”œâ”€â”€ config.json                   # é…ç½®æ–‡ä»¶
â””â”€â”€ ...
```

---

## ğŸ¤ æŠ€æœ¯æ”¯æŒ

- ğŸ“– **æ–‡æ¡£ä¼˜å…ˆ**ï¼šæŸ¥é˜… [å®Œæ•´ä½¿ç”¨æŒ‡å—](JINJA2_VERSION_GUIDE.md)
- ğŸ” **è‡ªæˆ‘è¯Šæ–­**ï¼šä½¿ç”¨ `--validate` æ£€æŸ¥æ¨¡æ¿
- ğŸ§ª **æµ‹è¯•éªŒè¯**ï¼šä½¿ç”¨ `--test` æµ‹è¯•åŠŸèƒ½
- ğŸ“ **æ•°æ®è®°å½•**ï¼šæŸ¥çœ‹ç”Ÿæˆçš„ `.json` æ–‡ä»¶

---

## ğŸ‰ ç«‹å³å¼€å§‹

```bash
# å®‰è£…ä¾èµ–
pip install docxtpl

# æµ‹è¯•è¿è¡Œ
python jinja2_filler.py --test

# æŸ¥çœ‹å¸®åŠ©
python jinja2_filler.py --help
```

**äº«å—å…¨æ–°çš„æ–‡æ¡£ç”Ÿæˆä½“éªŒï¼** ğŸš€

---

*æœ¬ç‰ˆæœ¬ç”± Claude Code å€ŸåŠ© zread å·¥å…·ç ”å‘*
*æ„Ÿè°¢å¼€æºç¤¾åŒºçš„è´¡çŒ®ï¼*
