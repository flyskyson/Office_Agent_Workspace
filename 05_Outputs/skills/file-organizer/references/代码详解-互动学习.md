# file_organizer ä»£ç è¯¦è§£ - äº’åŠ¨å­¦ä¹ 

> å­¦ä¹ æ–¹å¼ï¼šé˜…è¯»ä»£ç  â†’ å›ç­”é—®é¢˜ â†’ éªŒè¯ç†è§£

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- [ ] ç†è§£æ¯ä¸ªå‡½æ•°çš„ä½œç”¨
- [ ] æŒæ¡æ ¸å¿ƒPythonæ¦‚å¿µ
- [ ] èƒ½å¤Ÿè§£é‡Šä»£ç çš„å·¥ä½œæµç¨‹

---

## ğŸ“ é—®é¢˜1: ç¨‹åºå…¥å£

```python
if __name__ == '__main__':
    main()
```

**â“ é—®é¢˜**: è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä»€ä¹ˆè¦è¿™æ ·å†™ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š
- `__name__` æ˜¯Pythonçš„ç‰¹æ®Šå˜é‡
- ç›´æ¥è¿è¡Œè„šæœ¬æ—¶ï¼Œ`__name__ == '__main__'` ä¸ºTrue
- å¯¼å…¥æ¨¡å—æ—¶ï¼Œ`__name__ == '__main__'` ä¸ºFalse

**å¥½å¤„**ï¼š
- ç›´æ¥è¿è¡Œï¼šæ‰§è¡Œmain()å‡½æ•°
- è¢«å¯¼å…¥ï¼šä¸è‡ªåŠ¨æ‰§è¡Œmain()å‡½æ•°

**ç¤ºä¾‹**ï¼š
```python
# file_organizer.py
if __name__ == '__main__':
    print("æˆ‘æ˜¯ä¸»ç¨‹åº")
    main()

# other.py
import file_organizer  # ä¸ä¼šæ‰§è¡Œmain()
```
</details>

---

## ğŸ“ é—®é¢˜2: ç±»çš„åˆå§‹åŒ–

```python
def __init__(self, config_path='config.json'):
    self.config = self.load_config(config_path)
    self.stats = {
        'æ€»æ–‡ä»¶æ•°': 0,
        'æˆåŠŸç§»åŠ¨': 0,
        'ç”³è¯·äººç»Ÿè®¡': {},
        'ææ–™ç±»å‹ç»Ÿè®¡': {}
    }
```

**â“ é—®é¢˜**: `__init__` æ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ`self` æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š
- `__init__` åœ¨åˆ›å»ºå¯¹è±¡æ—¶**è‡ªåŠ¨æ‰§è¡Œ**
- `self` æŒ‡å‘**å¯¹è±¡è‡ªå·±**

**ç¤ºä¾‹**ï¼š
```python
organizer = FileOrganizer()  # æ­¤æ—¶__init__è‡ªåŠ¨æ‰§è¡Œ

# self.config ç°åœ¨å¯ä»¥é€šè¿‡organizer.configè®¿é—®
# self.stats ç°åœ¨å¯ä»¥é€šè¿‡organizer.statsè®¿é—®
```

**selfçš„ä½œç”¨**ï¼š
- åœ¨ç±»å†…éƒ¨è®¿é—®å¯¹è±¡çš„å˜é‡å’Œæ–¹æ³•
- ç±»ä¼¼äº"æˆ‘"çš„æ„æ€
</details>

---

## ğŸ“ é—®é¢˜3: os.path.join()

```python
item_path = os.path.join(folder_path, item)
```

**â“ é—®é¢˜**: ä¸ºä»€ä¹ˆè¦ç”¨ `os.path.join()` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

**âŒ ä¸æ¨è**ï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰ï¼š
```python
path = folder_path + '/' + item  # Windowsç”¨åæ–œæ ï¼Œä¼šå‡ºé”™
```

**âœ… æ¨è**ï¼ˆos.path.joinï¼‰ï¼š
```python
path = os.path.join(folder_path, item)
# è‡ªåŠ¨å¤„ç†æ–œæ ï¼š
# Windows: 'C:\\Desktop\\æ–‡ä»¶.txt'
# Linux: 'C:/Desktop/æ–‡ä»¶.txt'
```

**å¥½å¤„**ï¼šè·¨å¹³å°å…¼å®¹
</details>

---

## ğŸ“ é—®é¢˜4: split() çš„ç”¨æ³•

```python
if '_' in filename:
    parts = filename.split('_')
    applicant = parts[0]
```

**â“ é—®é¢˜**: `filename.split('_')` è¿”å›ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`split()` æŒ‰æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›åˆ—è¡¨

```python
filename = 'å¼ ä¸‰_èº«ä»½è¯.jpg'
parts = filename.split('_')
# è¿”å›: ['å¼ ä¸‰', 'èº«ä»½è¯.jpg']

parts[0]  # 'å¼ ä¸‰'  (ç”³è¯·äºº)
parts[1]  # 'èº«ä»½è¯.jpg'  (å‰©ä½™éƒ¨åˆ†)
```

**ç»ƒä¹ **ï¼š
```python
'æå››-ç”³è¯·è¡¨.docx'.split('-')
# è¿”å›: ['æå››', 'ç”³è¯·è¡¨.docx']

'a,b,c'.split(',')
# è¿”å›: ['a', 'b', 'c']
```
</details>

---

## ğŸ“ é—®é¢˜5: os.path.splitext()

```python
ext = os.path.splitext(item)[1].lower()
```

**â“ é—®é¢˜**: `[1]` æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨ `[0]`ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`os.path.splitext()` è¿”å› `(æ–‡ä»¶å, æ‰©å±•å)` å…ƒç»„

```python
name, ext = os.path.splitext('æ–‡ä»¶.txt')
# name = 'æ–‡ä»¶'   [0]
# ext = '.txt'    [1]

# å®é™…ä¾‹å­
os.path.splitext('å¼ ä¸‰_èº«ä»½è¯.jpg')
# è¿”å›: ('å¼ ä¸‰_èº«ä»½è¯', '.jpg')
#         [0]          [1]
```

**ä¸ºä»€ä¹ˆè¦ [1]ï¼Ÿ**
- `[0]` æ˜¯æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰
- `[1]` æ˜¯æ‰©å±•åï¼ˆå«ç‚¹å·ï¼‰
</details>

---

## ğŸ“ é—®é¢˜6: å­—å…¸çš„ get() æ–¹æ³•

```python
self.stats['ç”³è¯·äººç»Ÿè®¡'].get(applicant, 0) + 1
```

**â“ é—®é¢˜**: `get(applicant, 0)` æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`get(key, default)` ä»å­—å…¸è·å–å€¼ï¼Œå¦‚æœkeyä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼

```python
stats = {'å¼ ä¸‰': 3}

# âŒ ç›´æ¥è®¿é—®ï¼ˆkeyä¸å­˜åœ¨ä¼šæŠ¥é”™ï¼‰
count = stats['æå››']  # KeyError!

# âœ… ä½¿ç”¨get()
count = stats.get('æå››', 0)  # è¿”å› 0

# å®é™…ä½¿ç”¨
stats['å¼ ä¸‰'] = stats.get('å¼ ä¸‰', 0) + 1
# å¦‚æœå¼ ä¸‰å­˜åœ¨ï¼Œæ•°é‡+1
# å¦‚æœå¼ ä¸‰ä¸å­˜åœ¨ï¼Œåˆå§‹åŒ–ä¸º0åå†+1
```

**å¥½å¤„**ï¼šé¿å…KeyErroré”™è¯¯
</details>

---

## ğŸ“ é—®é¢˜7: shutil.move()

```python
shutil.move(src_path, dest_path)
```

**â“ é—®é¢˜**: ä¸ºä»€ä¹ˆè¦ç”¨ `shutil.move()` è€Œä¸æ˜¯ `os.rename()`ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

| æ–¹æ³• | è·¨ç£ç›˜ç§»åŠ¨ | è·¨åˆ†åŒºç§»åŠ¨ |
|------|-----------|-----------|
| os.rename() | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ |
| shutil.move() | âœ… æ”¯æŒ | âœ… æ”¯æŒ |

**ç¤ºä¾‹**ï¼š
```python
# os.rename åªèƒ½åœ¨åŒä¸€ç£ç›˜
os.rename('C:/æ–‡ä»¶.txt', 'D:/æ–‡ä»¶.txt')  # âŒ å¤±è´¥

# shutil.move å¯ä»¥è·¨ç£ç›˜
shutil.move('C:/æ–‡ä»¶.txt', 'D:/æ–‡ä»¶.txt')  # âœ… æˆåŠŸ
```

**å®é™…åœºæ™¯**ï¼š
- Cç›˜æ¡Œé¢ â†’ Dç›˜æ¡£æ¡ˆ
- éœ€è¦ç”¨shutil.move()
</details>

---

## ğŸ“ é—®é¢˜8: makedirs()

```python
os.makedirs(dest_folder, exist_ok=True)
```

**â“ é—®é¢˜**: `exist_ok=True` æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`exist_ok=True` è¡¨ç¤ºæ–‡ä»¶å¤¹å­˜åœ¨ä¹Ÿä¸æŠ¥é”™

```python
# âŒ ä¸ä½¿ç”¨exist_ok
os.makedirs('C:/æ–‡ä»¶å¤¹')
# å¦‚æœæ–‡ä»¶å¤¹å·²å­˜åœ¨ â†’ FileExistsError

# âœ… ä½¿ç”¨exist_ok
os.makedirs('C:/æ–‡ä»¶å¤¹', exist_ok=True)
# å¦‚æœæ–‡ä»¶å¤¹å·²å­˜åœ¨ â†’ ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸æŠ¥é”™
```

**å¥½å¤„**ï¼šå¯ä»¥é‡å¤è°ƒç”¨ï¼Œä¸ä¼šå‡ºé”™
</details>

---

## ğŸ“ é—®é¢˜9: å­—ç¬¦ä¸²çš„ in æ“ä½œ

```python
if 'èº«ä»½è¯' in filename:
```

**â“ é—®é¢˜**: è¿™ä¸ªåˆ¤æ–­æ˜¯åŒºåˆ†å¤§å°å†™å—ï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`in` æ“ä½œ**åŒºåˆ†å¤§å°å†™**

```python
'èº«ä»½è¯' in 'å¼ ä¸‰_èº«ä»½è¯.jpg'  # True
'èº«ä»½è¯' in 'å¼ ä¸‰_id.jpg'      # False
'ID' in 'å¼ ä¸‰_ID.jpg'          # True
'id' in 'å¼ ä¸‰_ID.jpg'          # False (å¤§å°å†™ä¸åŒ¹é…)
```

**ä¸åŒºåˆ†å¤§å°å†™çš„å†™æ³•**ï¼š
```python
if 'èº«ä»½è¯' in filename.lower():
    # å…ˆè½¬å°å†™å†åˆ¤æ–­
```
</details>

---

## ğŸ“ é—®é¢˜10: for å¾ªç¯éå†å­—å…¸

```python
for applicant, count in self.stats['ç”³è¯·äººç»Ÿè®¡'].items():
    print(f"{applicant}: {count}ä¸ªæ–‡ä»¶")
```

**â“ é—®é¢˜**: `.items()` æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**ï¼š

`.items()` è¿”å›å­—å…¸çš„(é”®, å€¼)å…ƒç»„åˆ—è¡¨

```python
stats = {'å¼ ä¸‰': 4, 'æå››': 3}

# .items() è¿”å›
# [('å¼ ä¸‰', 4), ('æå››', 3)]

for applicant, count in stats.items():
    print(f"{applicant}: {count}")
# è¾“å‡º:
# å¼ ä¸‰: 4
# æå››: 3
```

**å…¶ä»–éå†æ–¹å¼**ï¼š
```python
# åªéå†é”®
for applicant in stats.keys():
    print(applicant)

# åªéå†å€¼
for count in stats.values():
    print(count)
```
</details>

---

## ğŸ¯ ç»ƒä¹ é¢˜

### **ç»ƒä¹ 1: æ‰‹åŠ¨æ¨¡æ‹Ÿä»£ç æ‰§è¡Œ**

```python
filename = 'å¼ ä¸‰_èº«ä»½è¯.jpg'
if '_' in filename:
    parts = filename.split('_')
    applicant = parts[0]
```

**â“ é—®é¢˜**: `applicant` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**: `'å¼ ä¸‰'`

è§£æï¼š
1. `'_' in 'å¼ ä¸‰_èº«ä»½è¯.jpg'` â†’ True
2. `'å¼ ä¸‰_èº«ä»½è¯.jpg'.split('_')` â†’ `['å¼ ä¸‰', 'èº«ä»½è¯.jpg']`
3. `parts[0]` â†’ `'å¼ ä¸‰'`
</details>

---

### **ç»ƒä¹ 2: è·¯å¾„æ‹¼æ¥**

```python
base = 'C:/å·¥ä½œæ–‡æ¡£'
date = '2025-01-08'
path = os.path.join(base, date)
```

**â“ é—®é¢˜**: `path` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**: `'C:/å·¥ä½œæ–‡æ¡£/2025-01-08'` (Windowsä¼šè‡ªåŠ¨ç”¨åæ–œæ )
</details>

---

### **ç»ƒä¹ 3: æ‰©å±•åæå–**

```python
filename = 'ç”³è¯·è¡¨.docx'
ext = os.path.splitext(filename)[1]
```

**â“ é—®é¢˜**: `ext` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**: `'.docx'` (æ³¨æ„å‰é¢æœ‰ä¸ªç‚¹)
</details>

---

### **ç»ƒä¹ 4: å­—å…¸æ“ä½œ**

```python
stats = {}
stats['å¼ ä¸‰'] = stats.get('å¼ ä¸‰', 0) + 1
```

**â“ é—®é¢˜**: æ‰§è¡Œå `stats` æ˜¯ä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**: `{'å¼ ä¸‰': 1}`

è§£æï¼š
1. `stats.get('å¼ ä¸‰', 0)` è¿”å› `0`ï¼ˆå› ä¸ºkeyä¸å­˜åœ¨ï¼‰
2. `0 + 1` = `1`
3. `stats['å¼ ä¸‰'] = 1`
</details>

---

### **ç»ƒä¹ 5: å­—ç¬¦ä¸²åˆ¤æ–­**

```python
filename = 'å¼ ä¸‰_ID.jpg'
if 'id' in filename.lower():
    print('åŒ…å«ID')
```

**â“ é—®é¢˜**: ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</summary>

**ç­”æ¡ˆ**: ä¼šè¾“å‡º `'åŒ…å«ID'`

è§£æï¼š
1. `filename.lower()` â†’ `'å¼ ä¸‰_id.jpg'`
2. `'id' in 'å¼ ä¸‰_id.jpg'` â†’ True
3. æ‰§è¡Œprintè¯­å¥
</details>

---

## âœ… å­¦ä¹ æ£€éªŒ

å®Œæˆä¸Šé¢æ‰€æœ‰ç»ƒä¹ åï¼Œæ‚¨åº”è¯¥èƒ½å›ç­”è¿™äº›é—®é¢˜ï¼š

1. âœ… ä¸ºä»€ä¹ˆè¦ç”¨é…ç½®æ–‡ä»¶ï¼Ÿ
2. âœ… `os.path.join()` çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ
3. âœ… `shutil.move()` å’Œ `os.rename()` çš„åŒºåˆ«ï¼Ÿ
4. âœ… å¦‚ä½•ä»æ–‡ä»¶åæå–æ‰©å±•åï¼Ÿ
5. âœ… `dict.get(key, default)` çš„ä½œç”¨ï¼Ÿ
6. âœ… `self` åœ¨ç±»ä¸­çš„ä½œç”¨ï¼Ÿ

**å¦‚æœéƒ½èƒ½å›ç­”ï¼Œæ­å–œæ‚¨æŒæ¡äº†æ ¸å¿ƒçŸ¥è¯†ï¼** ğŸ‰

---

## ğŸ“– è¿›é˜¶ç»ƒä¹ 

### **æ”¹è¿›ä»»åŠ¡1: æ”¯æŒæ— åˆ†éš”ç¬¦æ–‡ä»¶å**

**é—®é¢˜**: `ç‹äº”èº«ä»½è¯.jpg` æ— æ³•è¯†åˆ«ç”³è¯·äºº

**æç¤º**: å¯ä»¥å°è¯•æå–ææ–™ç±»å‹ä¹‹å‰çš„éƒ¨åˆ†

```python
# ä¾‹å¦‚: 'ç‹äº”èº«ä»½è¯.jpg' â†’ 'ç‹äº”'
# æç¤º: ç”¨å­—ç¬¦ä¸²replace()
```

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹æ€è·¯</summary>

```python
# æ€è·¯1: éå†ææ–™ç±»å‹ï¼Œæå–å‰é¢çš„éƒ¨åˆ†
for material_type, keywords in self.config['file_patterns'].items():
    for keyword in keywords:
        if keyword in remaining:
            # æå–å…³é”®è¯å‰é¢çš„éƒ¨åˆ†ä½œä¸ºç”³è¯·äºº
            idx = remaining.find(keyword)
            applicant = remaining[:idx]
```
</details>

---

### **æ”¹è¿›ä»»åŠ¡2: æ·»åŠ æ—¥å¿—è®°å½•**

**é—®é¢˜**: ç¨‹åºè¿è¡Œåæ— æ³•æŸ¥çœ‹å†å²è®°å½•

**æç¤º**: ç”¨ `logging` æ¨¡å—

```python
import logging

logging.basicConfig(filename='organizer.log', level=logging.INFO)
logging.info('æ•´ç†å®Œæˆ: å¤„ç†äº†10ä¸ªæ–‡ä»¶')
```

---

## ğŸ“ å­¦ä¹ èµ„æº

- [Pythonå®˜æ–¹æ•™ç¨‹](https://docs.python.org/3/tutorial/)
- [osæ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/os.path.html)
- [shutilæ¨¡å—æ–‡æ¡£](https://docs.python.org/3/library/shutil.html)

---

**å­¦ä¹ æ„‰å¿«ï¼** ğŸš€
